function init(){$(document).ready(function(){var n,i={initCenter:[116.397428,39.90923],pannel_toggle:ko.observable(!1),jump:!1,panel:$("#panel"),menu_btn:$("#menu_btn"),list:$("#list li"),header_title_width:$("#header_title").width()+10,markers:[],infowindows:[],transform_width:ko.observable(0),locations:[{name:"天安门",position:[116.397391,39.908743]},{name:"故宫博物院",position:[116.396919,39.917959]},{name:"汉庭酒店",position:[116.403227,39.911376]},{name:"医院",position:[116.403914,39.920362]},{name:"王府井百货",position:[116.409922,39.91345]}],mapMarker:function(n){for(var t=0;t<i.markers.length;t++)t===n?i.markers[t].setAnimation("AMAP_ANIMATION_BOUNCE"):i.markers[t].setAnimation("AMAP_ANIMATION_NONE")}},t={self:this,initMap:function(){n=new AMap.Map("map",{resizeEnable:!0,zoom:11,center:i.initCenter,mapStyle:"amap://styles/04736ff583c7a006b6300e746254d625"}),AMap.plugin(["AMap.ToolBar","AMap.Scale","AMap.OverView"],function(){n.addControl(new AMap.ToolBar({position:"RT",autoPosition:!1}))}),AMapUI.loadUI(["control/BasicControl"],function(i){n.addControl(new i.LayerSwitcher({position:"rb"}))});for(o=0;o<i.locations.length;o++)t.setMarker(i.locations[o].position,i.locations[o].name),t.setInfowindow(i.locations[o].name);for(var o=0;o<i.locations.length;o++)AMap.event.addListener(i.markers[o],"click",function(){i.infowindows[o].open(n,i.markers[o].getPosition()),i.jump?i.markers[o].setAnimation("AMAP_ANIMATION_NONE"):i.markers[o].setAnimation("AMAP_ANIMATION_BOUNCE"),i.jump=!i.jump})},initMain:function(){ko.applyBindings(i),t.initMap(),t.eventAdd()},eventAdd:function(){i.menu_btn.bind("click",function(){t.panel_animation()})},setMarker:function(t,o){var e=new AMap.Marker({position:t,title:o,map:n,animation:"AMAP_ANIMATION_DROP",offset:{x:-10,y:0}});i.markers.push(e)},getMarker:function(n){return i.markers[n]},setInfowindow:function(n){var t=new AMap.InfoWindow({content:n});i.infowindows.push(t)},getInfowindow:function(n){return i.infowindows[n]},panel_animation:function(){i.panel_toggle?i.transform_width(-i.header_title_width):i.transform_width(0),i.panel_toggle=!i.pannel_toggle},getInfoFromWiki:function(n){}};t.initMain(),n.setFitView()})}